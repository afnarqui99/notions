<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3. JavaScript Avanzado</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .ejemplo { background: #f5f5f5; padding: 15px; margin: 20px 0; border-radius: 5px; }
        button { background: #4CAF50; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>JavaScript Avanzado</h1>
    
    <div class="ejemplo">
        <h2>1. Async/Await y Promesas</h2>
        <button onclick="ejemploPromesa()">Ejecutar Promesa</button>
        <button onclick="ejemploAsync()">Ejecutar Async/Await</button>
        <div id="resultado-async"></div>
    </div>
    
    <div class="ejemplo">
        <h2>2. Fetch API</h2>
        <button onclick="fetchEjemplo()">Hacer Petición</button>
        <div id="resultado-fetch"></div>
    </div>
    
    <div class="ejemplo">
        <h2>3. LocalStorage</h2>
        <input type="text" id="input-storage" placeholder="Escribe algo...">
        <button onclick="guardarStorage()">Guardar</button>
        <button onclick="cargarStorage()">Cargar</button>
        <button onclick="limpiarStorage()">Limpiar</button>
        <div id="resultado-storage"></div>
    </div>
    
    <div class="ejemplo">
        <h2>4. Timers</h2>
        <button onclick="ejemploSetTimeout()">setTimeout</button>
        <button onclick="ejemploSetInterval()">setInterval</button>
        <button onclick="detenerInterval()">Detener</button>
        <div id="resultado-timer"></div>
    </div>
    
    <script>
        // Async/Await
        function ejemploPromesa() {
            new Promise(resolve => setTimeout(() => resolve('Promesa resuelta'), 1000))
                .then(result => document.getElementById('resultado-async').textContent = result);
        }
        
        async function ejemploAsync() {
            const resultado = await new Promise(resolve => setTimeout(() => resolve('Async completado'), 1000));
            document.getElementById('resultado-async').textContent = resultado;
        }
        
        // Fetch
        async function fetchEjemplo() {
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                const data = await response.json();
                document.getElementById('resultado-fetch').innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('resultado-fetch').textContent = 'Error: ' + error.message;
            }
        }
        
        // LocalStorage
        function guardarStorage() {
            const valor = document.getElementById('input-storage').value;
            localStorage.setItem('miDato', valor);
            document.getElementById('resultado-storage').textContent = 'Guardado: ' + valor;
        }
        
        function cargarStorage() {
            const valor = localStorage.getItem('miDato');
            document.getElementById('resultado-storage').textContent = 'Cargado: ' + (valor || 'No hay datos');
        }
        
        function limpiarStorage() {
            localStorage.removeItem('miDato');
            document.getElementById('resultado-storage').textContent = 'Limpiado';
        }
        
        // Timers
        let intervaloId;
        function ejemploSetTimeout() {
            document.getElementById('resultado-timer').textContent = 'Espera 2 segundos...';
            setTimeout(() => {
                document.getElementById('resultado-timer').textContent = '¡Timeout completado!';
            }, 2000);
        }
        
        function ejemploSetInterval() {
            let contador = 0;
            intervaloId = setInterval(() => {
                contador++;
                document.getElementById('resultado-timer').textContent = `Contador: ${contador}`;
            }, 1000);
        }
        
        function detenerInterval() {
            if (intervaloId) {
                clearInterval(intervaloId);
                document.getElementById('resultado-timer').textContent = 'Intervalo detenido';
            }
        }
    </script>
</body>
</html>


