<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2. JavaScript - Eventos Avanzados</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .ejemplo {
            background-color: #f5f5f5;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .caja-arrastrable {
            width: 100px;
            height: 100px;
            background-color: #2196F3;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: move;
            margin: 10px;
        }
        
        .zona-soltar {
            width: 200px;
            height: 200px;
            border: 2px dashed #ccc;
            margin: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .zona-soltar.drag-over {
            background-color: #e3f2fd;
            border-color: #2196F3;
        }
        
        #coordenadas {
            position: fixed;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>JavaScript - Eventos Avanzados</h1>
    
    <div class="ejemplo">
        <h2>1. Eventos del Mouse</h2>
        <div id="caja-mouse" style="width: 200px; height: 100px; background-color: #4CAF50; color: white; display: flex; align-items: center; justify-content: center; margin: 10px 0;">
            Pasa el mouse aquí
        </div>
        <p id="evento-mouse"></p>
    </div>
    
    <div class="ejemplo">
        <h2>2. Eventos del Teclado</h2>
        <input type="text" id="input-teclado" placeholder="Presiona teclas aquí...">
        <p id="evento-teclado"></p>
    </div>
    
    <div class="ejemplo">
        <h2>3. Drag and Drop</h2>
        <div class="caja-arrastrable" id="arrastrable" draggable="true">Arrástrame</div>
        <div class="zona-soltar" id="zona-soltar">Suelta aquí</div>
    </div>
    
    <div class="ejemplo">
        <h2>4. Eventos de Formulario</h2>
        <form id="formulario-avanzado">
            <input type="text" id="input-focus" placeholder="Haz focus aquí">
            <input type="text" id="input-blur" placeholder="Haz blur aquí">
            <select id="select-change">
                <option value="">Selecciona...</option>
                <option value="opcion1">Opción 1</option>
                <option value="opcion2">Opción 2</option>
                <option value="opcion3">Opción 3</option>
            </select>
            <p id="evento-formulario"></p>
        </form>
    </div>
    
    <div class="ejemplo">
        <h2>5. Event Delegation</h2>
        <ul id="lista-dinamica">
            <li>Item 1 <button class="eliminar">Eliminar</button></li>
            <li>Item 2 <button class="eliminar">Eliminar</button></li>
            <li>Item 3 <button class="eliminar">Eliminar</button></li>
        </ul>
        <button onclick="agregarItem()">Agregar Item</button>
    </div>
    
    <div class="ejemplo">
        <h2>6. Event Bubbling y Capturing</h2>
        <div id="padre" style="background-color: #ffeb3b; padding: 20px;">
            <div id="hijo" style="background-color: #4CAF50; padding: 20px; color: white;">
                <button id="boton-bubbling">Haz Clic</button>
            </div>
        </div>
        <p id="info-bubbling"></p>
    </div>
    
    <div class="ejemplo">
        <h2>7. Coordenadas del Mouse</h2>
        <div id="area-coordenadas" style="width: 100%; height: 200px; background-color: #e0e0e0; border: 1px solid #ccc; position: relative;">
            Mueve el mouse aquí
        </div>
        <div id="coordenadas"></div>
    </div>
    
    <div class="ejemplo">
        <h2>8. Prevent Default y Stop Propagation</h2>
        <a href="https://example.com" id="enlace-prevent">Este enlace no navegará</a>
        <div id="contenedor-propagation" style="background-color: #f0f0f0; padding: 20px;">
            <button id="boton-stop">Este botón detiene la propagación</button>
        </div>
        <p id="info-propagation"></p>
    </div>
    
    <script>
        // 1. Eventos del Mouse
        const cajaMouse = document.getElementById('caja-mouse');
        const eventoMouse = document.getElementById('evento-mouse');
        
        cajaMouse.addEventListener('mouseenter', () => {
            eventoMouse.textContent = 'Mouse entró';
            cajaMouse.style.backgroundColor = '#45a049';
        });
        
        cajaMouse.addEventListener('mouseleave', () => {
            eventoMouse.textContent = 'Mouse salió';
            cajaMouse.style.backgroundColor = '#4CAF50';
        });
        
        cajaMouse.addEventListener('mousedown', () => {
            eventoMouse.textContent = 'Mouse presionado';
        });
        
        cajaMouse.addEventListener('mouseup', () => {
            eventoMouse.textContent = 'Mouse liberado';
        });
        
        cajaMouse.addEventListener('dblclick', () => {
            eventoMouse.textContent = 'Doble clic detectado';
        });
        
        // 2. Eventos del Teclado
        const inputTeclado = document.getElementById('input-teclado');
        const eventoTeclado = document.getElementById('evento-teclado');
        
        inputTeclado.addEventListener('keydown', (e) => {
            eventoTeclado.innerHTML = `
                <strong>keydown:</strong> Tecla "${e.key}" (Código: ${e.code})<br>
                Ctrl: ${e.ctrlKey}, Shift: ${e.shiftKey}, Alt: ${e.altKey}
            `;
        });
        
        inputTeclado.addEventListener('keyup', (e) => {
            eventoTeclado.innerHTML += `<br><strong>keyup:</strong> Tecla "${e.key}" liberada`;
        });
        
        // 3. Drag and Drop
        const arrastrable = document.getElementById('arrastrable');
        const zonaSoltar = document.getElementById('zona-soltar');
        
        arrastrable.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', arrastrable.id);
            arrastrable.style.opacity = '0.5';
        });
        
        arrastrable.addEventListener('dragend', () => {
            arrastrable.style.opacity = '1';
        });
        
        zonaSoltar.addEventListener('dragover', (e) => {
            e.preventDefault();
            zonaSoltar.classList.add('drag-over');
        });
        
        zonaSoltar.addEventListener('dragleave', () => {
            zonaSoltar.classList.remove('drag-over');
        });
        
        zonaSoltar.addEventListener('drop', (e) => {
            e.preventDefault();
            const id = e.dataTransfer.getData('text/plain');
            const elemento = document.getElementById(id);
            zonaSoltar.appendChild(elemento);
            zonaSoltar.classList.remove('drag-over');
            zonaSoltar.textContent = '¡Soltado!';
        });
        
        // 4. Eventos de Formulario
        const inputFocus = document.getElementById('input-focus');
        const inputBlur = document.getElementById('input-blur');
        const selectChange = document.getElementById('select-change');
        const eventoFormulario = document.getElementById('evento-formulario');
        
        inputFocus.addEventListener('focus', () => {
            eventoFormulario.textContent = 'Input recibió focus';
            inputFocus.style.backgroundColor = '#ffeb3b';
        });
        
        inputBlur.addEventListener('blur', () => {
            eventoFormulario.textContent = 'Input perdió focus (blur)';
            inputBlur.style.backgroundColor = '';
        });
        
        selectChange.addEventListener('change', (e) => {
            eventoFormulario.textContent = `Opción seleccionada: ${e.target.value}`;
        });
        
        // 5. Event Delegation
        let contadorItems = 3;
        
        function agregarItem() {
            const lista = document.getElementById('lista-dinamica');
            const nuevoItem = document.createElement('li');
            nuevoItem.innerHTML = `Item ${++contadorItems} <button class="eliminar">Eliminar</button>`;
            lista.appendChild(nuevoItem);
        }
        
        // Usar event delegation para manejar clicks en botones que se agregan dinámicamente
        document.getElementById('lista-dinamica').addEventListener('click', (e) => {
            if (e.target.classList.contains('eliminar')) {
                e.target.parentElement.remove();
            }
        });
        
        // 6. Event Bubbling y Capturing
        const padre = document.getElementById('padre');
        const hijo = document.getElementById('hijo');
        const botonBubbling = document.getElementById('boton-bubbling');
        const infoBubbling = document.getElementById('info-bubbling');
        
        // Capturing phase (true)
        padre.addEventListener('click', () => {
            infoBubbling.textContent += 'Padre (capturing) → ';
        }, true);
        
        hijo.addEventListener('click', () => {
            infoBubbling.textContent += 'Hijo (capturing) → ';
        }, true);
        
        // Bubbling phase (false, por defecto)
        botonBubbling.addEventListener('click', () => {
            infoBubbling.textContent += 'Botón (bubbling) → ';
        });
        
        hijo.addEventListener('click', () => {
            infoBubbling.textContent += 'Hijo (bubbling) → ';
        });
        
        padre.addEventListener('click', () => {
            infoBubbling.textContent += 'Padre (bubbling)';
        });
        
        // 7. Coordenadas del Mouse
        const areaCoordenadas = document.getElementById('area-coordenadas');
        const coordenadas = document.getElementById('coordenadas');
        
        areaCoordenadas.addEventListener('mousemove', (e) => {
            const rect = areaCoordenadas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            coordenadas.textContent = `X: ${Math.round(x)}, Y: ${Math.round(y)}`;
            coordenadas.style.left = (e.clientX + 10) + 'px';
            coordenadas.style.top = (e.clientY + 10) + 'px';
        });
        
        // 8. Prevent Default y Stop Propagation
        const enlacePrevent = document.getElementById('enlace-prevent');
        const botonStop = document.getElementById('boton-stop');
        const contenedorPropagation = document.getElementById('contenedor-propagation');
        const infoPropagation = document.getElementById('info-propagation');
        
        enlacePrevent.addEventListener('click', (e) => {
            e.preventDefault();
            alert('Navegación prevenida con preventDefault()');
        });
        
        botonStop.addEventListener('click', (e) => {
            e.stopPropagation();
            infoPropagation.textContent = 'Propagación detenida - el contenedor no recibió el evento';
        });
        
        contenedorPropagation.addEventListener('click', () => {
            infoPropagation.textContent = 'Contenedor recibió el evento';
        });
    </script>
</body>
</html>

