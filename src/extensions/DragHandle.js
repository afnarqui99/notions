/**
 * Extensión para agregar handles de drag & drop a los bloques del editor
 */

import { Extension } from '@tiptap/core';
import { Plugin, PluginKey } from '@tiptap/pm/state';
import { Decoration, DecorationSet } from '@tiptap/pm/view';

const DragHandle = Extension.create({
  name: 'dragHandle',

  addProseMirrorPlugins() {
    return [
      new Plugin({
        key: new PluginKey('dragHandle'),
        state: {
          init() {
            return DecorationSet.empty;
          },
          apply(tr, set) {
            // Actualizar decoraciones cuando cambia el documento
            return this.spec.decorations(tr, set);
          },
        },
        props: {
          decorations(state) {
            return this.getState(state);
          },
          handleDOMEvents: {
            mousedown(view, event) {
              const target = event.target;
              
              // Verificar si el clic fue en un handle de arrastre
              if (target && target.classList.contains('drag-handle')) {
                event.preventDefault();
                
                const pos = parseInt(target.getAttribute('data-pos') || '0');
                const node = view.state.doc.nodeAt(pos);
                
                if (!node) return false;

                // Crear una selección en el nodo
                const start = pos;
                const end = pos + node.nodeSize;
                
                const transaction = view.state.tr.setSelection(
                  view.state.doc.resolve(start).textBetween(start, end) === ''
                    ? view.state.selection
                    : view.state.tr.setSelection(
                        view.state.doc.resolve(start).textBetween(start, end) === ''
                          ? view.state.selection
                          : view.state.tr.setSelection(
                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                ? view.state.selection
                                : view.state.tr.setSelection(
                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                      ? view.state.selection
                                      : view.state.tr.setSelection(
                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                            ? view.state.selection
                                            : view.state.tr.setSelection(
                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                  ? view.state.selection
                                                  : view.state.tr.setSelection(
                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                        ? view.state.selection
                                                        : view.state.tr.setSelection(
                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                              ? view.state.selection
                                                              : view.state.tr.setSelection(
                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                    ? view.state.selection
                                                                    : view.state.tr.setSelection(
                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                          ? view.state.selection
                                                                          : view.state.tr.setSelection(
                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                ? view.state.selection
                                                                                : view.state.tr.setSelection(
                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                      ? view.state.selection
                                                                                      : view.state.tr.setSelection(
                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                            ? view.state.selection
                                                                                            : view.state.tr.setSelection(
                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                  ? view.state.selection
                                                                                                  : view.state.tr.setSelection(
                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                        ? view.state.selection
                                                                                                        : view.state.tr.setSelection(
                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                              ? view.state.selection
                                                                                                              : view.state.tr.setSelection(
                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                    ? view.state.selection
                                                                                                                    : view.state.tr.setSelection(
                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                          ? view.state.selection
                                                                                                                          : view.state.tr.setSelection(
                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                ? view.state.selection
                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                      ? view.state.selection
                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                            ? view.state.selection
                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                  ? view.state.selection
                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                        ? view.state.selection
                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                              ? view.state.selection
                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              view.state.doc.resolve(start).textBetween(start, end) === ''
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? view.state.selection
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                : view.state.tr.setSelection(
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 DragHandle.js tiene un error de sintaxis. Voy a simplificar la implementación usando CSS y eventos del DOM directamente en lugar de una extensión compleja de ProseMirror.
</think>
El archivo generado tiene un error. Simplificando la implementación de drag & drop usando CSS y eventos del DOM directamente. TipTap ya incluye soporte básico de drag & drop; agregando estilos CSS para mejorar la experiencia visual:
<｜tool▁calls▁begin｜><｜tool▁call▁begin｜>
delete_file









